(function(t){function e(e){for(var r,l,s=e[0],o=e[1],i=e[2],b=0,f=[];b<s.length;b++)l=s[b],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&f.push(a[l][0]),a[l]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);u&&u(e);while(f.length)f.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],r=!0,s=1;s<n.length;s++){var o=n[s];0!==a[o]&&(r=!1)}r&&(c.splice(e--,1),t=l(l.s=n[0]))}return t}var r={},a={app:0},c=[];function l(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=r,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)l.d(n,r,function(e){return t[e]}.bind(null,r));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var i=0;i<s.length;i++)e(s[i]);var u=o;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"3a25":function(t,e,n){"use strict";n("7b8a")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(t,e,n,a,c,l){var s=Object(r["k"])("popup");return Object(r["h"])(),Object(r["c"])(s)}n("b0c0");var c={class:"form-inline"},l=Object(r["e"])(" Enter Character ID "),s=Object(r["e"])("  "),o={key:0},i={class:"row"},u={class:"col-12"},b={class:"row"},f={class:"col-3"},d={class:"col-9"},h={class:"row"},m={class:"col-6"},p={class:"col-6"},v={class:"row"},g={class:"col-12"};function j(t,e,n,a,j,O){var C=Object(r["k"])("initiative"),y=Object(r["k"])("saves"),k=Object(r["k"])("skills"),S=Object(r["k"])("attacks"),M=Object(r["k"])("otherrolls"),N=Object(r["k"])("spells");return Object(r["h"])(),Object(r["c"])("div",null,[Object(r["f"])("label",c,[l,Object(r["p"])(Object(r["f"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return j.charid=t}),type:"text",class:"form-control"},null,512),[[r["n"],j.charid]])]),s,Object(r["f"])("button",{onClick:e[2]||(e[2]=function(e){return t.loadCharacter(j.charid)}),class:"btn btn-sm btn-primary"},"Go Get Em!"),t.character.name.length>0?(Object(r["h"])(),Object(r["c"])("div",o,[Object(r["f"])("h4",null,Object(r["l"])(t.character.name),1),Object(r["f"])("div",i,[Object(r["f"])("div",u,[Object(r["f"])(C)])]),Object(r["f"])("div",b,[Object(r["f"])("div",f,[Object(r["f"])(y)]),Object(r["f"])("div",d,[Object(r["f"])(k)])]),Object(r["f"])("div",h,[Object(r["f"])("div",m,[Object(r["f"])(S)]),Object(r["f"])("div",p,[Object(r["f"])(M)])]),Object(r["f"])("div",v,[Object(r["f"])("div",g,[Object(r["f"])(N)])])])):Object(r["d"])("",!0)])}var O=n("5530"),C=n("5502"),y=Object(r["f"])("thead",null,[Object(r["f"])("tr",null,[Object(r["f"])("th",null,"Saves")])],-1),k=Object(r["e"])("STR "),S={key:0},M=Object(r["e"])("DEX "),N={key:0},w=Object(r["e"])("CON "),A={key:0},E=Object(r["e"])("INT "),T={key:0},P=Object(r["e"])("WIS "),x={key:0},D=Object(r["e"])("CHA "),B={key:0};function I(t,e,n,a,c,l){return Object(r["h"])(),Object(r["c"])("div",null,[Object(r["f"])("table",null,[y,Object(r["f"])("tbody",null,[Object(r["f"])("tr",null,[Object(r["f"])("td",null,[Object(r["f"])("button",{onClick:e[1]||(e[1]=function(t){return l.rollSave(0)}),class:"btn btn-sm btn-primary"},[k,t.getSaveMod(0)>=0?(Object(r["h"])(),Object(r["c"])("span",S,"+")):Object(r["d"])("",!0),Object(r["e"])(Object(r["l"])(t.getSaveMod(0)),1)])])]),Object(r["f"])("tr",null,[Object(r["f"])("td",null,[Object(r["f"])("button",{onClick:e[2]||(e[2]=function(t){return l.rollSave(1)}),class:"btn btn-sm btn-primary"},[M,t.getSaveMod(1)>=0?(Object(r["h"])(),Object(r["c"])("span",N,"+")):Object(r["d"])("",!0),Object(r["e"])(Object(r["l"])(t.getSaveMod(1)),1)])])]),Object(r["f"])("tr",null,[Object(r["f"])("td",null,[Object(r["f"])("button",{onClick:e[3]||(e[3]=function(t){return l.rollSave(2)}),class:"btn btn-sm btn-primary"},[w,t.getSaveMod(2)>=0?(Object(r["h"])(),Object(r["c"])("span",A,"+")):Object(r["d"])("",!0),Object(r["e"])(Object(r["l"])(t.getSaveMod(2)),1)])])]),Object(r["f"])("tr",null,[Object(r["f"])("td",null,[Object(r["f"])("button",{onClick:e[4]||(e[4]=function(t){return l.rollSave(3)}),class:"btn btn-sm btn-primary"},[E,t.getSaveMod(3)>=0?(Object(r["h"])(),Object(r["c"])("span",T,"+")):Object(r["d"])("",!0),Object(r["e"])(Object(r["l"])(t.getSaveMod(3)),1)])])]),Object(r["f"])("tr",null,[Object(r["f"])("td",null,[Object(r["f"])("button",{onClick:e[5]||(e[5]=function(t){return l.rollSave(4)}),class:"btn btn-sm btn-primary"},[P,t.getSaveMod(4)>=0?(Object(r["h"])(),Object(r["c"])("span",x,"+")):Object(r["d"])("",!0),Object(r["e"])(Object(r["l"])(t.getSaveMod(4)),1)])])]),Object(r["f"])("tr",null,[Object(r["f"])("td",null,[Object(r["f"])("button",{onClick:e[6]||(e[6]=function(t){return l.rollSave(5)}),class:"btn btn-sm btn-primary"},[D,t.getSaveMod(5)>=0?(Object(r["h"])(),Object(r["c"])("span",B,"+")):Object(r["d"])("",!0),Object(r["e"])(Object(r["l"])(t.getSaveMod(5)),1)])])])])])])}var L={computed:Object(O["a"])({},Object(C["c"])({getSaveMod:"getSaveMod"})),methods:Object(O["a"])(Object(O["a"])({},Object(C["b"])({sendroll:"sendroll"})),{},{buildtemplate:function(t,e){var n="&{template:default}{{name="+t+"}}";for(var r in e)n+="{{"+r+"="+e[r]+"}}";return n},rollSave:function(t){var e=this.getSaveMod(t),n=["Strength","Dexterity","Constitution","Intelligence","Wisdom","Charisma"][t],r={Save:"[[1d20+"+e+"]] [[1d20+"+e+"]]"};this.sendroll(this.buildtemplate(n+" Saving Throw",r))}})};L.render=I;var q=L,W=Object(r["f"])("tr",null,[Object(r["f"])("th",{colspan:"3"},"Skills")],-1),R={key:0};function H(t,e,n,a,c,l){return Object(r["h"])(),Object(r["c"])("div",null,[Object(r["f"])("table",null,[W,(Object(r["h"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(l.skillsArray.length,(function(e){return Object(r["h"])(),Object(r["c"])("tr",{key:e},[(Object(r["h"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(l.skillsArray[e-1],(function(e){return Object(r["h"])(),Object(r["c"])("td",{key:e.name},[Object(r["f"])("button",{onClick:function(t){return l.rollSkill(e)},class:"btn btn-sm btn-primary"},[Object(r["e"])(Object(r["l"])(e.name)+" ",1),t.getSkillMod(e)>=0?(Object(r["h"])(),Object(r["c"])("span",R,"+")):Object(r["d"])("",!0),Object(r["e"])(Object(r["l"])(t.getSkillMod(e)),1)],8,["onClick"])])})),128))])})),128))])])}n("159b");var z={computed:Object(O["a"])(Object(O["a"])({},Object(C["c"])({getSkillMod:"getSkillMod",character:"getCharacter"})),{},{skillsArray:function(){var t=0,e=0,n=[];return console.log(this.character),this.character.skills.forEach((function(r){t%3===0?(e++,t++,n.push([r])):(n[e-1].push(r),t++)})),n}}),methods:Object(O["a"])(Object(O["a"])({},Object(C["b"])({sendroll:"sendroll"})),{},{buildtemplate:function(t,e){var n="&{template:default}{{name="+t+"}}";for(var r in e)n+="{{"+r+"="+e[r]+"}}";return n},rollSkill:function(t){console.log(t);var e=this.getSkillMod(t),n={Skill:"[[1d20+"+e+"]] [[1d20+"+e+"]]"};this.sendroll(this.buildtemplate(t.name,n))}})};z.render=H;var G=z,V=Object(r["f"])("h5",null,"Attacks",-1),_={key:0};function U(t,e,n,a,c,l){return Object(r["h"])(),Object(r["c"])("div",null,[V,(Object(r["h"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(t.character.attacks,(function(e,n){return Object(r["h"])(),Object(r["c"])("div",{key:n,style:{"margin-top":"2px"}},[Object(r["f"])("button",{onClick:function(t){return l.rollAttack(e)},class:"btn btn-sm btn-primary"},[Object(r["e"])(Object(r["l"])(e.name)+" ",1),t.getAttackBonus(e)>=0?(Object(r["h"])(),Object(r["c"])("span",_,"+")):Object(r["d"])("",!0),Object(r["e"])(Object(r["l"])(t.getAttackBonus(e)),1)],8,["onClick"])])})),128))])}n("13d5");var K={computed:Object(O["a"])({},Object(C["c"])({character:"getCharacter",getAttackBonus:"getAttackBonus",getDamageBonus:"getDamageBonus"})),methods:Object(O["a"])(Object(O["a"])({},Object(C["b"])({sendroll:"sendroll"})),{},{buildtemplate:function(t,e){var n="&{template:default}{{name="+t+"}}";for(var r in e)n+="{{"+r+"="+e[r]+"}}";return n},rollAttack:function(t){var e=this,n="[[1d20cs>"+t.critRange+"+"+this.getAttackBonus(t)+"]]",r=n+" "+n,a=this.character.feats.reduce((function(t,e){return"Elven Accuracy"===e.name||t}),!1)&&(1===t.stat||3===t.stat||4===t.stat||5===t.stat);a&&(r+=" "+n);var c={"Attack Roll":r};t.damage.forEach((function(n){var r="[["+n.dice+"+"+e.getDamageBonus(n,t.stat)+"]] crit: [["+n.dice+"]]";c[n.dtype]=r})),this.sendroll(this.buildtemplate(t.name,c))}})};K.render=U;var J=K,X=Object(r["f"])("h5",null,"Spells",-1),F={class:"btn-group print-hide smalltext"},Q={class:"smalltext print-hide"},Y=Object(r["e"])("Prepared Only"),Z=Object(r["f"])("br",null,null,-1),$={class:"table table-sm"},tt=Object(r["f"])("thead",null,[Object(r["f"])("tr",null,[Object(r["f"])("th",null,"Spell"),Object(r["f"])("th",null,"Casting Time"),Object(r["f"])("th",null,"Duration"),Object(r["f"])("th",null,"Class"),Object(r["f"])("th",{colspan:"2"},"-")])],-1),et={key:0};function nt(t,e,n,a,c,l){return Object(r["h"])(),Object(r["c"])("div",null,[X,Object(r["f"])("div",F,[Object(r["f"])("button",{class:"btn btn-sm btn-primary",onClick:e[1]||(e[1]=function(t){return c.displayLevel="cantrip"})},"cantrip"),Object(r["f"])("button",{class:"btn btn-sm btn-primary",onClick:e[2]||(e[2]=function(t){return c.displayLevel="level1"})},"1"),Object(r["f"])("button",{class:"btn btn-sm btn-primary",onClick:e[3]||(e[3]=function(t){return c.displayLevel="level2"})},"2"),Object(r["f"])("button",{class:"btn btn-sm btn-primary",onClick:e[4]||(e[4]=function(t){return c.displayLevel="level3"})},"3"),Object(r["f"])("button",{class:"btn btn-sm btn-primary",onClick:e[5]||(e[5]=function(t){return c.displayLevel="level4"})},"4"),Object(r["f"])("button",{class:"btn btn-sm btn-primary",onClick:e[6]||(e[6]=function(t){return c.displayLevel="level5"})},"5"),Object(r["f"])("button",{class:"btn btn-sm btn-primary",onClick:e[7]||(e[7]=function(t){return c.displayLevel="level6"})},"6"),Object(r["f"])("button",{class:"btn btn-sm btn-primary",onClick:e[8]||(e[8]=function(t){return c.displayLevel="level7"})},"7"),Object(r["f"])("button",{class:"btn btn-sm btn-primary",onClick:e[9]||(e[9]=function(t){return c.displayLevel="level8"})},"8"),Object(r["f"])("button",{class:"btn btn-sm btn-primary",onClick:e[10]||(e[10]=function(t){return c.displayLevel="level9"})},"9")]),Object(r["f"])("span",Q,[Object(r["p"])(Object(r["f"])("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=function(t){return c.preparedonly=t})},null,512),[[r["m"],c.preparedonly]]),Y]),Z,Object(r["f"])("table",$,[tt,Object(r["f"])("tbody",null,[(Object(r["h"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(l.sortedSpells,(function(t){return Object(r["h"])(),Object(r["c"])("tr",{key:t.title},[Object(r["f"])("td",null,[Object(r["f"])("button",{class:"btn btn-sm btn-primary",onClick:function(e){return l.rollspell(t)}},[Object(r["e"])(Object(r["l"])(t.title),1),t.ritual?(Object(r["h"])(),Object(r["c"])("span",et," (ritual)")):Object(r["d"])("",!0)],8,["onClick"])]),Object(r["f"])("td",null,Object(r["l"])(t.castingTime),1),Object(r["f"])("td",null,Object(r["l"])(t.duration),1),Object(r["f"])("td",null,Object(r["l"])(t.class),1)])})),128))])])])}n("4de4"),n("fb6a"),n("caad"),n("2532"),n("a4d3"),n("e01a");var rt={setup:function(){},computed:Object(O["a"])(Object(O["a"])({},Object(C["c"])({character:"getCharacter",getSaveDC:"getSaveDC"})),{},{sortedSpells:function(){var t=this,e=this.character.spells[this.displayLevel].filter((function(e){return!!(e.prepared&&t.preparedonly||!t.preparedonly||"cantrip"===t.displayLevel)})),n=e.slice(0);return n.sort((function(t,e){return t.title>e.title?1:e.title>t.title?-1:0})),n}}),data:function(){return{displayLevel:"cantrip",preparedonly:!1}},methods:Object(O["a"])(Object(O["a"])({},Object(C["b"])({sendroll:"sendroll"})),{},{rollspell:function(t){var e=t.components.includes("V")?1:0,n=t.components.includes("S")?1:0,r="&{template:spell} {{level="+t.school+" "+t.level+"}} {{name="+t.title+"}} {{castingtime="+t.castingTime+"}} {{range="+t.range+"}} {{target=see description}} {{v="+e+"}} {{s="+n+"}} 0 {{material=not enabled}} {{duration="+t.duration+"}} {{description="+t.description+"}} {{athigherlevels=}} 0 {{innate=}} {{savedc=}}";this.sendroll(r)}})};rt.render=nt;var at=rt,ct=Object(r["e"])(" Initiative ("),lt={key:0},st=Object(r["e"])("  "),ot=Object(r["e"])("  ");function it(t,e,n,a,c,l){return Object(r["h"])(),Object(r["c"])("div",null,[Object(r["f"])("h5",null,[ct,t.getInitMod>=0?(Object(r["h"])(),Object(r["c"])("span",lt,"+")):Object(r["d"])("",!0),Object(r["e"])(Object(r["l"])(t.getInitMod)+") ",1),Object(r["f"])("button",{class:"btn btn-primary btn-sm",onClick:e[1]||(e[1]=function(t){return l.init(0)})},"Normal"),st,Object(r["f"])("button",{class:"btn btn-primary btn-sm",onClick:e[2]||(e[2]=function(t){return l.init(2)})},"Advantage"),ot,Object(r["f"])("button",{class:"btn btn-primary btn-sm",onClick:e[3]||(e[3]=function(t){return l.init(1)})},"Disadvantage")])])}var ut={computed:Object(O["a"])({},Object(C["c"])({character:"getCharacter",getInitMod:"getInitMod"})),methods:Object(O["a"])(Object(O["a"])({},Object(C["b"])({sendroll:"sendroll"})),{},{buildtemplate:function(t,e){var n="&{template:default}{{name="+t+"}}";for(var r in e)n+="{{"+r+"="+e[r]+"}}";return n},init:function(t){var e="[[1d20+";t&&(e="[[2d20dh1+",t-=1),t&&(e="[[2d20dl1+"),e+=this.getInitMod+" &{tracker}]]";var n={Initiative:e};this.sendroll(this.buildtemplate("Initiative",n))}})};ut.render=it;var bt=ut,ft=Object(r["f"])("h5",null,"Other Rolls",-1),dt={class:"form-inline"},ht=Object(r["e"])("Add Levels: ");function mt(t,e,n,a,c,l){return Object(r["h"])(),Object(r["c"])("div",null,[ft,Object(r["f"])("label",dt,[ht,Object(r["p"])(Object(r["f"])("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.boostlevels=e}),class:"form-control"},null,512),[[r["n"],t.boostlevels]])]),(Object(r["h"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(t.character.rolls,(function(t,e){return Object(r["h"])(),Object(r["c"])("div",{key:e,style:{"margin-top":"2px"}},[Object(r["f"])("button",{onClick:function(e){return l.rollit(t)},class:"btn btn-sm btn-primary"},Object(r["l"])(t.name),9,["onClick"])])})),128))])}var pt={computed:Object(O["a"])({},Object(C["c"])({character:"getCharacter",getSaveDC:"getSaveDC",getDamageBonus:"getDamageBonus"})),data:function(){return{boostlevels:0}},methods:Object(O["a"])(Object(O["a"])({},Object(C["b"])({sendroll:"sendroll"})),{},{buildtemplate:function(t,e){var n="&{template:default}{{name="+t+"}}";for(var r in e)n+="{{"+r+"="+e[r]+"}}";return n},rollit:function(t){var e=this,n={};t.savestat&&(n["save"]="DC "+this.getSaveDC(t.stat)+" "+t.savestat+" Save",n["save for"]=t.savefor),t.damage.forEach((function(r){for(var a="[["+r.dice+"+"+e.getDamageBonus(r,t.stat)+"]]",c="[[",l=0;l<e.boostlevels;l++)c+=r.higherlevels+"+";c+="0]]",a+=" "+c,n[r.label]=a})),n["range"]=t.range,n["description"]=t.description,this.sendroll(this.buildtemplate(t.name,n))}})};pt.render=mt;var vt=pt,gt={components:{initiative:bt,otherrolls:vt,saves:q,skills:G,attacks:J,spells:at},computed:Object(O["a"])({},Object(C["d"])({character:"currentCharacter"})),data:function(){return{charid:""}},methods:Object(O["a"])({},Object(C["b"])({loadCharacter:"loadCharacter"})),mounted:function(){var t=this;chrome?chrome.storage.sync.get({elthelascharacter:!1},(function(e){e.elthelascharacter&&(console.log(e.elthelascharacter),t.loadCharacter(e.elthelascharacter))})):browser.storage.sync.get({elthelascharacter:!1},(function(e){e.elthelascharacer&&(console.log(e.elthelascharacer),t.loadCharacter(e.elthelascharacter))}))}};gt.render=j;var jt=gt,Ot={name:"App",components:{popup:jt}};n("3a25");Ot.render=a;var Ct=Ot,yt=n("bc3a"),kt=n.n(yt),St=(n("c740"),n("a9e3"),n("d3b7"),n("25f0"),n("4128"));function Mt(t){return new St["Decimal"](Number(t))}var Nt={slots:[[0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0],[4,2,0,0,0,0,0,0,0],[4,3,0,0,0,0,0,0,0],[4,3,2,0,0,0,0,0,0],[4,3,3,0,0,0,0,0,0],[4,3,3,1,0,0,0,0,0],[4,3,3,2,0,0,0,0,0],[4,3,3,3,1,0,0,0,0],[4,3,3,3,2,0,0,0,0],[4,3,3,3,2,1,0,0,0],[4,3,3,3,2,1,0,0,0],[4,3,3,3,2,1,1,0,0],[4,3,3,3,2,1,1,0,0],[4,3,3,3,2,1,1,1,0],[4,3,3,3,2,1,1,1,0],[4,3,3,3,2,1,1,1,1],[4,3,3,3,3,1,1,1,1],[4,3,3,3,3,2,1,1,1],[4,3,3,3,3,2,2,1,1]],acCalc:function(t){var e=this,n=t.armors.filter((function(t){return"Shield"===t.type})),r=t.armors.reduce((function(n,r){if(r.equipped&&"Shield"!==r.type){var a=e.armorAC(t,r);a>n&&(n=a)}return n}),10+this.statMod(t,1)),a=n.reduce((function(t,e){return e.equipped?t+Number(e.ac):t}),0);return Number(r)+Number(a)+Number(t.acmagic)},armorAC:function(t,e){var n=Number(e.ac);if("Medium Armor"===e.type){var r=t.feats.filter((function(t){return"Medium Armor Master"===t.name})),a=2;r.length>0&&a++,e.name.toLowerCase().includes("mithril")&&a++,n=Number(e.ac)+Math.min(a,this.statMod(t,1))}else"Light Armor"===e.type?n=Number(e.ac)+this.statMod(t,1):"Unarmored Bonus"===e.type&&(n=10+Number(e.ac)+this.statMod(t,1)+this.statMod(t,e.unarmoredstat));return n},attBonus:function(t,e){return Number(t.attBonus[e])+this.statMod(t,e)+this.profbonus(t)},attackBonus:function(t,e){return Number(e.bonus)+Number(this.statMod(t,e.stat))+this.profbonus(t)*e.prof},bardPrepared:function(t){var e=Math.min(t.level,9)+3;return e+=Math.floor(Math.max(0,Math.min(t.level,17)-9)/2),t.level>9&&(e+=2),t.level>13&&(e+=2),t.level>17&&(e+=2),t.level>5&&"College of Lore"===t.selsubclass.name&&(e+=2),e},carryMax:function(t){var e=15*this.statTotal(t,0);return"tiny"===t.size?e*=.5:"large"===t.size?e*=2:"huge"===t.size&&(e*=4),e+Number(t.capacitybonus)},carryWeight:function(t){var e=Mt(0);return this.equipmentContainers(t).forEach((function(t){e=e.add(t.weight),t.weightCounts&&(e=e.add(t.equipment.reduce((function(t,e){return t.add(Mt(e.weight).mul(e.quantity))}),Mt(0))))})),e=e.add(Mt(t.cp).add(t.sp).add(t.gp).add(t.pp).div(50)).toNumber(),e},charlevel:function(t){var e=0;return t.charclasses.forEach((function(t){e+=Number(t.level)})),e},classtext:function(t){return t.charclasses.reduce((function(t,e){return t+e.thisclass.name+" "+e.level.toString()+" "}),"")},damageBonus:function(t,e,n){var r=Number(e.damagebonus);return e.addstat&&(r+=Number(this.statMod(t,n))),e.prof&&(r+=Number(this.profbonus(t))),r},equipmentContainers:function(t){var e=[],n={equipment:t.equipment.filter((function(e){return!e.container||0===t.containers.filter((function(t){return e.container===t.id})).length})),name:"Not In Container",capacity:9999,weightCounts:!0,weight:0,contains:0};return n.equipment.forEach((function(t){n.contains+=t.weight*t.quantity})),n.equipment.length>0&&e.push(n),t.containers.forEach((function(n){var r=t.equipment.filter((function(t){return t.container===n.id})),a=0;r.forEach((function(t){a+=t.weight*t.quantity})),e.push(Object(O["a"])(Object(O["a"])({},n),{},{equipment:r,contains:a,container:n}))})),e},hpTotal:function(t){var e=this,n=0;return t.charclasses.forEach((function(r){n+=Number(r.level)*(r.thisclass.hitdie/2+e.statMod(t,2)+1)})),n+=t.charclasses[0].thisclass.hitdie/2-1,n+=Number(t.hpmagic),n},incrementClassCount:function(t,e){e.forEach((function(e){t.class===e.classname&&t.prepared&&e.numprepped++}))},initMod:function(t){return this.statMod(t,1)+Number(t.initmagic)},level:function(t){return t.charclasses.reduce((function(t,e){return t+Number(e.level)}),0)},numPrepped:function(t,e){var n=this;e.level1.forEach((function(e){n.incrementClassCount(e,t)})),e.level2.forEach((function(e){n.incrementClassCount(e,t)})),e.level3.forEach((function(e){n.incrementClassCount(e,t)})),e.level4.forEach((function(e){n.incrementClassCount(e,t)})),e.level5.forEach((function(e){n.incrementClassCount(e,t)})),e.level6.forEach((function(e){n.incrementClassCount(e,t)})),e.level7.forEach((function(e){n.incrementClassCount(e,t)})),e.level8.forEach((function(e){n.incrementClassCount(e,t)})),e.level9.forEach((function(e){n.incrementClassCount(e,t)}))},saveDC:function(t,e){return 8+this.profbonus(t)+this.statMod(t,e)+Number(t.saveDCBonus[e])},saveMod:function(t,e){return this.statMod(t,e)+Number(t.savebonus[e])+t.saves[e]*this.profbonus(t)},skillMod:function(t,e){return this.statMod(t,e.stat)+Math.floor(Number(e.prof)*this.profbonus(t))+Number(e.magic)},speedStat:function(t,e){return Number(t.race.speed[e])+Number(t.speedmagic[e])},statTotal:function(t,e){return Number(t.stats[e])+Number(t.race.stats[e])+Number(t.statbonus[e])},statMod:function(t,e){return Math.floor(this.statTotal(t,e)/2)-5},totalPrepared:function(t){var e=this,n=t.spells,r=[];return t.charclasses.forEach((function(n){var a=Math.floor(n.level*n.selsubclass.castermult+e.statMod(t,n.savedcstat));"Sorcerer"===n.thisclass.name&&(a=Math.min(n.level,11)+1,a+=Math.floor(Math.max(0,Math.min(n.level,17)-11)/2)),"Warlock"===n.thisclass.name&&(a=Math.min(n.level,9)+1,a+=Math.floor(Math.max(0,n.level-9)/2)),"Bard"===n.thisclass.name&&(a=e.bardPrepared(n)),"Cleric"===n.thisclass.name&&(a+=2+2*Math.floor(Math.min(n.level-1,8)/2)),"Ranger"===n.thisclass.name&&n.level>=2&&(a=Math.ceil(n.level/2)+1),"Paladin"===n.thisclass.name&&n.level>2&&(a+=2*(Math.floor((n.level-1)/4)+1)),("Fighter"===n.thisclass.name&&"Eldritch Knight"===n.selsubclass.name||"Rogue"===n.thisclass.name&&"Arcane Trickster"===n.selsubclass.name)&&(a=e.thirdCasterPrepared(n)),a+=Number(n.bonusknown),r.push({classname:n.thisclass.name,maxprepped:a,numprepped:0})})),this.numPrepped(r,n),r},cantripsknown:function(t){var e=t.charclasses.reduce((function(t,e){var n=0;return Number(e.level)>=e.thisclass.cantriplevel&&e.thisclass.cantrips>0?(n=e.thisclass.cantrips,1===e.selsubclass.castermult||"Warlock"===e.thisclass.name?(Number(e.level)>=4&&n++,Number(e.level)>=10&&n++):(Number(e.level)>=10&&n++,Number(e.level)>=14&&n++)):("Eldritch Knight"===e.selsubclass.name||"Arcane Trickster"===e.selsubclass.name)&&Number(e.level)>=3&&(n=2,"Arcane Trickster"===e.selsubclass.name&&n++,Number(e.level)>=10&&n++),t+n}),0);return e+=Number(t.bonuscantrips),e},profbonus:function(t){var e=t.charclasses.reduce((function(t,e){return t+Number(e.level)}),0);return Math.ceil(e/4)+1},thirdCasterPrepared:function(t){var e=Math.floor((t.level-1)/3)+3;return t.level>=8&&e++,t.level>=11&&e++,t.level>=14&&e++,t.level>=20&&e++,e},totalGold:function(t){return Mt(t.cp).div(100).add(Mt(t.sp).div(10)).add(Mt(t.gp)).add(Mt(t.pp).mul(10)).add(Mt(t.art)).add(Mt(t.gems)).toNumber()},totalSlots:function(t,e){var n=0;if("cantrip"===e)return"infinite";n=Number(e.substring(5))-1;var r=0;1===t.charclasses.length?r+=Math.ceil(Number(t.charclasses[0].level)*Number(t.charclasses[0].selsubclass.castermult)):t.charclasses.forEach((function(t){"Artificer"===t.thisclass.name&&(r+=Math.ceil(Number(t.level)*Number(t.selsubclass.castermult))),r+=Math.floor(Number(t.level)*Number(t.selsubclass.castermult))}));try{return this.slots[r][n]+Number(t.bonusslots[n])}catch(a){return 0}},warlockSlots:function(t){var e=0;return t.charclasses.forEach((function(n){"Warlock"===n.thisclass.name&&(n.level>=1&&e++,n.level>=2&&e++,n.level>=11&&e++,n.level>=17&&e++,e+=Number(t.warlockslotsmagic))})),e},warlockSlotLevel:function(t){return Math.min(t.charclasses.reduce((function(t,e){return"Warlock"===e.thisclass.name&&(t=Math.ceil(Number(e.level)/2)),t}),0),5)}},wt={getCharErrorMessage:function(t){return t.message},getStatRolls:function(t){return t.statRolls},hitdicechanged:function(t){return t.hitdicechanged},serverCharacters:function(t){return t.characters},driveCharacters:function(t){return t.drivefiles},getSlots:function(){return Nt.slots},incrementClassCount:function(){return function(t,e){Nt.incrementClassCount(t,e)}},getNumPrepped:function(){return function(t,e){return Nt.numPrepped(t,e)}},getBardPrepared:function(){return function(t){return Nt.bardPrepared(t)}},getThirdCasterPrepared:function(){return function(t){return Nt.thirdCasterPrepared(t)}},getTotalPrepared:function(t){return Nt.totalPrepared(t.currentCharacter)},getCharacter:function(t){return t.currentCharacter},getAsCreature:function(t,e){for(var n={name:t.currentCharacter.name,type:"humanoid",size:"medium",subtype:t.currentCharacter.race.name,cr:e.level,alignment:t.currentCharacter.alignment,ac:e.accalc,acdesc:e.accalc,hp:e.getHPTotal,hpdesc:e.getHPTotal,speed:e.getSpeedStat(0)+" ft",str:e.getStatTotal(0),strmod:e.getStatMod(0),dex:e.getStatTotal(1),dexmod:e.getStatMod(1),con:e.getStatTotal(2),conmod:e.getStatMod(2),int:e.getStatTotal(3),intmod:e.getStatMod(3),wis:e.getStatTotal(4),wismod:e.getStatMod(4),cha:e.getStatTotal(5),chamod:e.getStatMod(5),saves:e.getSaveMod(0)+" STR "+e.getSaveMod(1)+" DEX "+e.getSaveMod(2)+" CON "+e.getSaveMod(3)+" INT "+e.getSaveMod(4)+" WIS "+e.getSaveMod(5)+" CHA",senses:"passive perception "+(10+e.getSkillMod(t.currentCharacter.skills[11])),damageimmunities:"",conditionimmunities:"",languages:"",damageresistances:"",locations:"",latlong:"",description:""},r=1;r<5;r++)e.getSpeedStat(r)&&(n.speed+=" "+e.getSpeedStat(r),n.speed+=1===r?" fly":2===r?" climb":3===r?" swim":4===r?" burrow":"");return n.tags=[n.type,n.size,"cr"+n.cr,n.alignment],n},classtext:function(t){return Nt.classtext(t.currentCharacter)},profbonus:function(t){return Nt.profbonus(t.currentCharacter)},totalGold:function(t){return Nt.totalGold(t.currentCharacter)},getStatTotal:function(t){return function(e){return Nt.statTotal(t.currentCharacter,e)}},getStatMod:function(t){return function(e){return Nt.statMod(t.currentCharacter,e)}},getSaveMod:function(t){return function(e){return Nt.saveMod(t.currentCharacter,e)}},getSaveDC:function(t){return function(e){return Nt.saveDC(t.currentCharacter,e)}},charGroups:function(t){var e=[];t.characters.forEach((function(t){var n=e.findIndex((function(e){return e.name===t.group}));-1===n&&""!==t.group&&e.push({name:t.group,id:t.group+Date.now()})}));var n=e.findIndex((function(e){return e.name===t.currentCharacter.group}));return-1===n&&e.push({name:t.currentCharacter.group,id:"curchargroup"}),e},getAttBonus:function(t){return function(e){return Nt.attBonus(t.currentCharacter,e)}},getSkillMod:function(t){return function(e){return Nt.skillMod(t.currentCharacter,e)}},cantripsKnown:function(t){return Nt.cantripsknown(t.currentCharacter)},getInitMod:function(t){return Nt.initMod(t.currentCharacter)},getHPTotal:function(t){return Nt.hpTotal(t.currentCharacter)},pointbuy:function(t){return t.currentCharacter.stats.reduce((function(t,e){var n=Number(e)-8;return e>13&&(n+=Number(e)-13),e>15&&(n+=Number(e)-15),t+n}),0)},getSpeedStat:function(t){return function(e){return Nt.speedStat(t.currentCharacter,e)}},getAttackBonus:function(t){return function(e){return Nt.attackBonus(t.currentCharacter,e)}},getDamageBonus:function(t){return function(e,n){return Nt.damageBonus(t.currentCharacter,e,n)}},armorac:function(t){return function(e){return Nt.armorAC(t.currentCharacter,e)}},charlevel:function(){return Nt.charlevel},accalc:function(t){return Nt.acCalc(t.currentCharacter)},equipmentContainers:function(t){return Nt.equipmentContainers(t.currentCharacter)},carryWeight:function(t){return Nt.carryWeight(t.currentCharacter)},carryMax:function(t){return Nt.carryMax(t.currentCharacter)},totalslots:function(t){return function(e){return Nt.totalSlots(t.currentCharacter,e)}},warlockSlots:function(t){return Nt.warlockSlots(t.currentCharacter)},warlockSlotLevel:function(t){return Nt.warlockSlotLevel(t.currentCharacter)},level:function(t){return Nt.level(t.currentCharacter)},validateCharacter:function(t){return""!==t.currentCharacter.name||(alert("cannot save character without name"),!1)}},At=function(){return{name:"",player:"",warlockslotsavailable:0,bonuscantrips:0,group:"",charclasses:[{thisclass:{name:"",subclass:[],hitdie:6,features:[],proficiencies:{armor:[],weapons:[],tools:[],"saving throws":[],numskills:2,skills:[]}},level:0,savedcstat:0,selsubclass:{castermult:0,features:[]},bonusknown:0}],race:{stats:[0,0,0,0,0,0],speed:[0,0,0,0,0]},background:{feature:{show:!1,description:"",name:""},skills:[],tools:[]},alignment:"",faction:{level1:"",level10:""},homecountry:"",hometown:"",age:"",hpcurrent:1,height:"",weight:"",gender:"",eyes:"",hair:"",allies:"",backstory:"",bond:"",personality:"",notes:"",sessions:[],god:"",skin:"",pets:[],activemodifiers:[],skills:[{name:"Strength",prof:0,stat:0,magic:0},{name:"Dexterity",prof:0,stat:1,magic:0},{name:"Constitution",prof:0,stat:2,magic:0},{name:"Intelligence",prof:0,stat:3,magic:0},{name:"Wisdom",prof:0,stat:4,magic:0},{name:"Charisma",prof:0,stat:5,magic:0},{name:"Acrobatics",prof:0,stat:1,magic:0},{name:"Animal Handling",prof:0,stat:4,magic:0},{name:"Arcana",prof:0,stat:3,magic:0},{name:"Athletics",prof:0,stat:0,magic:0},{name:"Deception",prof:0,stat:5,magic:0},{name:"History",prof:0,stat:3,magic:0},{name:"Insight",prof:0,stat:4,magic:0},{name:"Intimidation",prof:0,stat:5,magic:0},{name:"Investigation",prof:0,stat:3,magic:0},{name:"Medicine",prof:0,stat:4,magic:0},{name:"Nature",prof:0,stat:3,magic:0},{name:"Perception",prof:0,stat:4,magic:0},{name:"Performance",prof:0,stat:5,magic:0},{name:"Persuasion",prof:0,stat:5,magic:0},{name:"Religion",prof:0,stat:3,magic:0},{name:"Sleight of Hand",prof:0,stat:1,magic:0},{name:"Stealth",prof:0,stat:1,magic:0},{name:"Survival",prof:0,stat:4,magic:0}],saves:[!1,!1,!1,!1,!1,!1],deathsuccess:0,deathfail:0,image:"",savebonus:[0,0,0,0,0,0],stats:[8,8,8,8,8,8],statbonus:[0,0,0,0,0,0],initmagic:0,hpmagic:0,acmagic:0,speedmagic:[0,0,0,0,0],attacks:[],armors:[],feats:[],injuries:[],bonusfeats:0,proficiencies:"",equipment:[],containers:[{id:1,name:"Carried/Worn",capacity:9999,weightCounts:!0,weight:0}],cp:0,sp:0,gp:0,pp:0,art:0,gems:0,size:"medium",capacitybonus:0,spells:{cantrip:[],level1:[],level2:[],level3:[],level4:[],level5:[],level6:[],level7:[],level8:[],level9:[]},availableslots:{cantrip:0,level1:0,level2:0,level3:0,level4:0,level5:0,level6:0,level7:0,level8:0,level9:0},bonusslots:[0,0,0,0,0,0,0,0,0],resources:[],features:[],saveDCBonus:[0,0,0,0,0,0],attBonus:[0,0,0,0,0,0],dr:{piercing:0,slashing:0,bludgeoning:0,mpiercing:0,mslashing:0,mbludgeoning:0,acid:0,cold:0,fire:0,force:0,lightning:0,necrotic:0,poison:0,psychic:0,radiant:0,thunder:0},actions:[],temphp:0,warlockslotsmagic:0,castlog:[]}},Et=Object(C["a"])({state:function(){return{currentCharacter:At()}},getters:wt,actions:{loadCharacter:function(t,e){var n=t.state;kt.a.get("https://elthelas.com/characters/"+e).then((function(t){n.currentCharacter=t.data,chrome?chrome.storage.sync.set({elthelascharacter:e},(function(){console.log("Value is set to "+e)})):browser.storage.sync.set({elthelascharacter:e},(function(){console.log("Value is set to: ",e)}))})).catch((function(t){console.log(t)}))},sendroll:function(t,e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){var n=t[0];console.log(e),chrome?chrome.tabs.sendMessage(n.id,{roll:e}):browser.tabs.sendMessage(n.id,{roll:e})}))}}}),Tt=Object(r["b"])(Ct);Tt.use(Et),Tt.mount("#app");e["default"]=Tt},"7b8a":function(t,e,n){}});
//# sourceMappingURL=app.bundle.js.map